{"ast":null,"code":"import{useEffect,useState}from'react';import{useLocation,useParams}from'react-router-dom';import Product from'../Product';import{ProductListContainer,ProductListItem}from'./styles';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=_ref=>{let{background,title,efoods}=_ref;const{id}=useParams();const location=useLocation();const[catalogoServico,setCatalogoServico]=useState([]);useEffect(()=>{if(efoods.length===0){fetch(\"https://fake-api-tau.vercel.app/api/efood/restaurantes/\".concat(id)).then(res=>res.json()).then(res=>setCatalogoServico([res])).catch(error=>console.error('Erro ao carregar dados:',error));}else{setCatalogoServico(efoods);}},[id,efoods]);const getEfoodTags=efood=>{const tags=[];if(efood.tipo){tags.push(efood.tipo);}if(efood.destacado){tags.push('Destaque da semana');}return tags;};const isPerfilPage=location.pathname.includes('/perfil');const getdescription=description=>{if(description.length>176){return description.slice(0,173)+'...';}return description;};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(ProductListContainer,{background:background,children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsx(ProductListItem,{background:background,children:catalogoServico.map(efood=>isPerfilPage?efood.cardapio.map(item=>/*#__PURE__*/_jsx(Product,{image:item.foto,infos:getEfoodTags(efood),title:item.nome,nota:efood.avaliacao,description:getdescription(item.descricao),to:\"/perfil/\".concat(efood.id),background:background},item.id)):/*#__PURE__*/_jsx(Product,{image:efood.capa,infos:getEfoodTags(efood),title:efood.titulo,nota:efood.avaliacao,description:efood.descricao,to:\"/perfil/\".concat(efood.id),background:background},efood.id))})]})});};export default ProductList;","map":{"version":3,"names":["useEffect","useState","useLocation","useParams","Product","ProductListContainer","ProductListItem","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","background","title","efoods","id","location","catalogoServico","setCatalogoServico","length","fetch","concat","then","res","json","catch","error","console","getEfoodTags","efood","tags","tipo","push","destacado","isPerfilPage","pathname","includes","getdescription","description","slice","className","children","map","cardapio","item","image","foto","infos","nome","nota","avaliacao","descricao","to","capa","titulo"],"sources":["C:/Users/USER/Desktop/APOSTILA EBAC/EXERCÍCIOS EBAC/curso-frontend/efood/src/components/ProductList/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { useLocation, useParams } from 'react-router-dom'\nimport Product from '../Product'\nimport { ProductListContainer, ProductListItem } from './styles'\n\nexport type Efood = {\n  id: number\n  capa: string\n  titulo: string\n  descricao: string\n  tipo: string\n  destacado: boolean\n  avaliacao: number\n  cardapio: {\n    foto: string\n    preco: number\n    id: number\n    nome: string\n    descricao: string\n    porcao: string\n  }[]\n}\n\nexport type Props = {\n  title: string\n  background: 'light' | 'dark'\n  efoods: Efood[]\n}\n\nconst ProductList = ({ background, title, efoods }: Props) => {\n  const { id } = useParams<{ id: string }>()\n  const location = useLocation()\n  const [catalogoServico, setCatalogoServico] = useState<Efood[]>([])\n\n  useEffect(() => {\n    if (efoods.length === 0) {\n      fetch(`https://fake-api-tau.vercel.app/api/efood/restaurantes/${id}`)\n        .then((res) => res.json())\n        .then((res) => setCatalogoServico([res]))\n        .catch((error) => console.error('Erro ao carregar dados:', error))\n    } else {\n      setCatalogoServico(efoods)\n    }\n  }, [id, efoods])\n\n  const getEfoodTags = (efood: Efood) => {\n    const tags: string[] = []\n    if (efood.tipo) {\n      tags.push(efood.tipo)\n    }\n    if (efood.destacado) {\n      tags.push('Destaque da semana')\n    }\n    return tags\n  }\n\n  const isPerfilPage = location.pathname.includes('/perfil')\n\n  const getdescription = (description: string) => {\n    if (description.length > 176) {\n      return description.slice(0, 173) + '...'\n    }\n    return description\n  }\n\n  return (\n    <div className=\"container\">\n      <ProductListContainer background={background}>\n        <h2>{title}</h2>\n        <ProductListItem background={background}>\n          {catalogoServico.map((efood) =>\n            isPerfilPage ? (\n              efood.cardapio.map((item) => (\n                <Product\n                  key={item.id}\n                  image={item.foto}\n                  infos={getEfoodTags(efood)}\n                  title={item.nome}\n                  nota={efood.avaliacao}\n                  description={getdescription(item.descricao)}\n                  to={`/perfil/${efood.id}`}\n                  background={background}\n                />\n              ))\n            ) : (\n              <Product\n                key={efood.id}\n                image={efood.capa}\n                infos={getEfoodTags(efood)}\n                title={efood.titulo}\n                nota={efood.avaliacao}\n                description={efood.descricao}\n                to={`/perfil/${efood.id}`}\n                background={background}\n              />\n            )\n          )}\n        </ProductListItem>\n      </ProductListContainer>\n    </div>\n  )\n}\n\nexport default ProductList\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,OAAO,KAAM,YAAY,CAChC,OAASC,oBAAoB,CAAEC,eAAe,KAAQ,UAAU,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBA0BhE,KAAM,CAAAC,WAAW,CAAGC,IAAA,EAA0C,IAAzC,CAAEC,UAAU,CAAEC,KAAK,CAAEC,MAAc,CAAC,CAAAH,IAAA,CACvD,KAAM,CAAEI,EAAG,CAAC,CAAGb,SAAS,CAAiB,CAAC,CAC1C,KAAM,CAAAc,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACgB,eAAe,CAAEC,kBAAkB,CAAC,CAAGlB,QAAQ,CAAU,EAAE,CAAC,CAEnED,SAAS,CAAC,IAAM,CACd,GAAIe,MAAM,CAACK,MAAM,GAAK,CAAC,CAAE,CACvBC,KAAK,2DAAAC,MAAA,CAA2DN,EAAE,CAAE,CAAC,CAClEO,IAAI,CAAEC,GAAG,EAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEC,GAAG,EAAKL,kBAAkB,CAAC,CAACK,GAAG,CAAC,CAAC,CAAC,CACxCE,KAAK,CAAEC,KAAK,EAAKC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAAC,CACtE,CAAC,IAAM,CACLR,kBAAkB,CAACJ,MAAM,CAAC,CAC5B,CACF,CAAC,CAAE,CAACC,EAAE,CAAED,MAAM,CAAC,CAAC,CAEhB,KAAM,CAAAc,YAAY,CAAIC,KAAY,EAAK,CACrC,KAAM,CAAAC,IAAc,CAAG,EAAE,CACzB,GAAID,KAAK,CAACE,IAAI,CAAE,CACdD,IAAI,CAACE,IAAI,CAACH,KAAK,CAACE,IAAI,CAAC,CACvB,CACA,GAAIF,KAAK,CAACI,SAAS,CAAE,CACnBH,IAAI,CAACE,IAAI,CAAC,oBAAoB,CAAC,CACjC,CACA,MAAO,CAAAF,IAAI,CACb,CAAC,CAED,KAAM,CAAAI,YAAY,CAAGlB,QAAQ,CAACmB,QAAQ,CAACC,QAAQ,CAAC,SAAS,CAAC,CAE1D,KAAM,CAAAC,cAAc,CAAIC,WAAmB,EAAK,CAC9C,GAAIA,WAAW,CAACnB,MAAM,CAAG,GAAG,CAAE,CAC5B,MAAO,CAAAmB,WAAW,CAACC,KAAK,CAAC,CAAC,CAAE,GAAG,CAAC,CAAG,KAAK,CAC1C,CACA,MAAO,CAAAD,WAAW,CACpB,CAAC,CAED,mBACE/B,IAAA,QAAKiC,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBhC,KAAA,CAACL,oBAAoB,EAACQ,UAAU,CAAEA,UAAW,CAAA6B,QAAA,eAC3ClC,IAAA,OAAAkC,QAAA,CAAK5B,KAAK,CAAK,CAAC,cAChBN,IAAA,CAACF,eAAe,EAACO,UAAU,CAAEA,UAAW,CAAA6B,QAAA,CACrCxB,eAAe,CAACyB,GAAG,CAAEb,KAAK,EACzBK,YAAY,CACVL,KAAK,CAACc,QAAQ,CAACD,GAAG,CAAEE,IAAI,eACtBrC,IAAA,CAACJ,OAAO,EAEN0C,KAAK,CAAED,IAAI,CAACE,IAAK,CACjBC,KAAK,CAAEnB,YAAY,CAACC,KAAK,CAAE,CAC3BhB,KAAK,CAAE+B,IAAI,CAACI,IAAK,CACjBC,IAAI,CAAEpB,KAAK,CAACqB,SAAU,CACtBZ,WAAW,CAAED,cAAc,CAACO,IAAI,CAACO,SAAS,CAAE,CAC5CC,EAAE,YAAA/B,MAAA,CAAaQ,KAAK,CAACd,EAAE,CAAG,CAC1BH,UAAU,CAAEA,UAAW,EAPlBgC,IAAI,CAAC7B,EAQX,CACF,CAAC,cAEFR,IAAA,CAACJ,OAAO,EAEN0C,KAAK,CAAEhB,KAAK,CAACwB,IAAK,CAClBN,KAAK,CAAEnB,YAAY,CAACC,KAAK,CAAE,CAC3BhB,KAAK,CAAEgB,KAAK,CAACyB,MAAO,CACpBL,IAAI,CAAEpB,KAAK,CAACqB,SAAU,CACtBZ,WAAW,CAAET,KAAK,CAACsB,SAAU,CAC7BC,EAAE,YAAA/B,MAAA,CAAaQ,KAAK,CAACd,EAAE,CAAG,CAC1BH,UAAU,CAAEA,UAAW,EAPlBiB,KAAK,CAACd,EAQZ,CAEL,CAAC,CACc,CAAC,EACE,CAAC,CACpB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}